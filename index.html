<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1.0, user-scalable=no, width=device-width"
    />
    <title>textinputvault</title>
    <link rel="stylesheet" type="text/css" href="./zoomwall.css" />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
      }
      body {
        background-color: black;
      }
      header {
        padding: 1em;
        background-color: #333;
        text-align: center;
      }
      a:link,
      a:visited {
        text-decoration: none;
        font-family: sans-serif;
        color: white;
      }
      a:hover {
        color: #ddd;
      }
      #author {
        float: left;
      }
      #repo {
        float: right;
      }
      #title {
        display: inline-block;
        font-weight: bold;
      }
      footer {
        padding: 1em;
        background-color: #333; /* Ensure contrast against the body's black background */
        color: white; /* Ensures text is visible */
        text-align: center;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
    <header>
        <a id="title" style="font-size: larger; color: white;">South America Travel wall</a>
      </header>
      
    

    <div id="zoomwall" class="zoomwall">
      <!-- Images will be loaded here -->
    </div>

    <!-- <script type="module">
      import * as zoomwall from "./zoomwall.js";

      async function loadImages() {
        // const response = await fetch("./imageList.json");
        const imageList = ['Image1.jpg','Image2.jpg','Image3.jpg','Image4.jpg','Image5.jpg','Image6.jpg',
        'Image7.jpg','Image8.jpg', 'Image9.jpg','Image10.jpg','Image11.jpg','Image12.jpg','Image13.jpg',
        'Image14.jpg','Image15.jpg','Image16.jpg, Image17.jpg','Image18.jpg','Image19.jpg','Image20.jpg','Image21.jpg','Image22.jpg',
        'Image23.jpg','Image24.jpg', 'Image25.jpg','Image26.jpg','Image27.jpg','Image28.jpg','Image29.jpg',
        'Image30.jpg','Image31.jpg','Image32.jpg']
        const zoomwallDiv = document.getElementById("zoomwall");

        for (let i = 0; i < imageList.length; i += 1) {
          const highres = imageList[i];
        //   const lowres = imageList[i + 1];
          const imgElement = `<img loading="lazy" srcset="./Media/${highres}, ./Media/${highres}" sizes="(max-width: 1280px) 250px, 1280px" src="./Media/${highres}" />`;
          zoomwallDiv.insertAdjacentHTML("beforeend", imgElement);
        }

            // Adding a delay of 2 seconds before initializing the zoomwall gallery
    setTimeout(() => {
        zoomwall.create(document.getElementById("zoomwall"), true);
    }, 3500); // 3.5 seconds delay

        //zoomwall.create(document.getElementById("zoomwall"), true);
      }

      // Modified page reloading logic with delay initially used "setInterval" but then changed to "setTimeout"
      if (!window.location.search.includes("r=1")) {
    setTimeout(function () {
        window.location.href = window.location.pathname + "?r=1";
          }, 100); // Ensure this is a one-time redirect
      } else {
                window.onload = loadImages; // Always initialize loading images
      }
    </script> -->
    <script type="module">
      import * as zoomwall from "./zoomwall.js";

      async function loadImages() {
        const response = await fetch("./media/");
        const html = await response.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const imageElements = doc.querySelectorAll('a[href$=".jpg"], a[href$=".png"], a[href$=".jpeg"], a[href$=".gif"]');

        const zoomwallDiv = document.getElementById("zoomwall");

        imageElements.forEach(imageElement => {
          const imageUrl = imageElement.getAttribute('href');
          const imgElement = `<img loading="lazy" src="./media/${imageUrl}" />`;
          zoomwallDiv.insertAdjacentHTML("beforeend", imgElement);
        });

        // Initialize zoomwall gallery after images are loaded
        zoomwall.create(document.getElementById("zoomwall"), true);
      }

      window.onload = loadImages;
    </script>
  </body>
</html>
